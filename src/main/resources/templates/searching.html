<!DOCTYPE html><!--  This site was created in Webflow. https://www.webflow.com  -->
<!--  Last Published: Wed Apr 03 2024 13:16:48 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="660d36b1388326f5f5a03f4b" data-wf-site="65dbafc99f6b400b3852fc07" lang="bg" xmlns:th="https://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <title>searching</title>
  <meta content="searching" property="og:title">
  <meta content="searching" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/samarbg-5ed359.webflow.css" rel="stylesheet" type="text/css">
  <link href="css/pagination-styles.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Droid Serif:400,400italic,700,700italic","Merriweather:300,300italic,400,400italic,700,700italic,900,900italic","Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
  <style>
    /* Стилове за скриване на loader */
    .loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #fde2b0;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999; /*  z-index да е над всичко друго */
    }
    /* скриване на страницата по време на зареждане */
    body.loading {
      overflow: hidden;
    }
  </style>
</head>
<body class="body-11 loading">
<!-- Loader елемент -->
<div id="loader" class="loader">
  <div class="div-block-27">
    <div class="text-block-17">Loading...</div> <!-- Текст за зареждане -->
    <img src="images/loadingHorse.gif" loading="lazy" width="112" alt="" class="image-18"> <!-- Анимирана икона за зареждане -->
  </div>
</div>
<div
        th:replace="~{fragments/navbar::navbar}">
</div>
  <div class="div-block-12"></div>
  <div class="div-block-51">
    <h1 class="heading-6">Търси по ключова дума</h1>
    <div class="div-block-50">
      <div class="form-block-4 w-form">
        <form id="email-form-2" name="email-form-2" data-name="Email Form 2"
              method="get"
              th:action="@{/searchingByWordsAndCategory}"
              class="form-4" data-wf-page-id="660d36b1388326f5f5a03f4b" data-wf-element-id="f87e62cd-346f-c25a-3a2b-7c7a1338d27d">
          <input th:name="searchingWord" class="text-field-6 w-input" maxlength="256" placeholder="Търси по име на Обява или Потребител..." type="text" id="searchInput">
          <input type="hidden" id="currentFilter" name="filter">
          <input type="hidden" name="mainCategory" th:value="${mainCategory}">
          <input type="hidden" name="cityCategory" th:value="${cityCategory}">
          <input type="hidden" name="horseCategory" th:value="${horseCategory}">
          <input type="hidden" name="genderCategory" th:value="${genderCategory}">
          <input type="hidden" name="accessoriesCategory" th:value="${accessoriesCategory}">
        </form>
        <div>
          <p th:if="${error}" th:text="${error}" class="error-text" style="color: #dc3838;"></p>
          <p th:if="${param.error != null}" th:text="${param.error}" class="error-text" style="color: #dc3838;"></p>
        </div>
      </div>
    </div>
  </div>
  <div class="div-block-52">
    <h1 class="heading-6 _2">Търси чрез избор на категории и филтриране</h1>
    <div class="div-block-50">
      <div class="form-block-4 w-form">
        <form  method="get"
               th:action="@{/searchingByWordsAndCategory}"
               id="email-form-3" name="email-form-2" data-name="Email Form 2"  class="form-5" >
          <div>
            <div class="block11">
              <label for="mainCategory" class="field-label-10">Основни категории</label>
              <select th:name="mainCategory" id="mainCategory"  data-name="Основни категории" class="select-field-3 _33 w-select">
                <option value="none">-</option>
                <option value="HORSES">Животни</option>
                <option value="ACCESSORIES">Аксесоари</option>
              </select>
              <label for="cityCategory" class="field-label-10">Населено Място</label>
              <select th:name="cityCategory" id="cityCategory"  data-name="Field city" class="select-field-3 _33 w-select">
              <option value="none">-</option>
              <option value="BLAGOEVGRAD">Благоевград</option>
              <option value="BURGAS">Бургас</option>
              <option value="VARNA">Варна</option>
              <option value="VELIKO_TARNOVO">Велико Търново</option>
              <option value="VIDIN">Видин</option>
              <option value="VRATSA">Враца</option>
              <option value="GABROVO">Габрово</option>
              <option value="DOBRICH">Добрич</option>
              <option value="KARDZHALI">Кърджали</option>
              <option value="KYUSTENDIL">Кюстендил</option>
              <option value="LOVECH">Ловеч</option>
              <option value="MONTANA">Монтана</option>
              <option value="PAZARDZHIK">Пазарджик</option>
              <option value="PERNIK">Перник</option>
              <option value="PLEVEN">Плевен</option>
              <option value="PLOVDIV">Пловдив</option>
              <option value="RAZGRAD">Разград</option>
              <option value="RUSE">Русе</option>
              <option value="SILISTRA">Силистра</option>
              <option value="SLIVEN">Сливен</option>
              <option value="SMOLYAN">Смолян</option>
              <option value="SOFIA">София</option>
              <option value="STARA_ZAGORA">Стара Загора</option>
              <option value="TARGOVISHTE">Търговище</option>
              <option value="HASKOVO">Хасково</option>
              <option value="SHUMEN">Шумен</option>
              <option value="YAMBOL">Ямбол</option>
              </select></div>
          </div>
          <div class="_2">
            <div class="div-block-53">
              <div class="block22">
                <label for="horseCategory" class="field-label-10 _3">Категория Коне</label>
                <select th:name="horseCategory" id="horseCategory" data-name="Field 3" class="select-field-3 _2 w-select">
                  <option value="none">-</option>
                  <option value="HORSE">Кон</option>
                  <option value="PONY">Пони</option>
                  <option value="Third">Тежкотоварен кон</option>
                </select>
                <label for="genderCategory" class="field-label-10 _3 align-center-2">Пол</label>
                <select th:name="genderCategory" id="genderCategory" data-name="Field 3" class="select-field-3 _2 w-select">
                  <option value="none">-</option>
                  <option value="MALE">Мъжки</option>
                  <option value="FEMALE">Женски</option>
                </select></div>
              <div class="block22 _2">
                <label for="accessoriesCategory" class="field-label-10 _3">Категория Аксесоари</label>
                <select th:name="accessoriesCategory" id="accessoriesCategory"  data-name="Field 3" class="select-field-3 _2 w-select">
                  <option value="none">-</option>
                  <option value="HORSESHOES">Подкови</option>
                  <option value="SAMARI">Самари</option>
                  <option value="SHOES">Обувки</option>
                  <option value="HATS">Шапки</option>
                  <option value="OTHERS">Други</option>
                </select></div>
            </div>
          </div>
          <input id="submit" type="submit" data-wait="Please wait..." class="submit-button-3 _2 w-button" value="Търси по категория">
          <input type="hidden" name="searchingWord" th:value="${searchingWord}">
          <input type="hidden" value="filter-select" name="filter">
        </form>
        <div class="w-form-done">
          <div>Thank you! Your submission has been received!</div>
        </div>
        <div class="w-form-fail">
          <div>Oops! Something went wrong while submitting the form.</div>
        </div>
      </div>
    </div>
  </div>
  <header id="blog-header-1" class="uui-section_blog01">
    <div class="uui-page-padding-2">
      <div class="uui-container-large-2">
        <div class="uui-padding-vertical-xhuge-2">
          <div class="uui-text-align-center">
            <div class="uui-max-width-large align-center">
              <h2 data-w-id="eb862235-3a5c-7664-6341-8d78a85ee51b" style="opacity:0" class="uui-heading-large">Обяви</h2>
              <div class="div-block-10">
                <div class="message-block">
                  <div data-w-id="eb862235-3a5c-7664-6341-8d78a85ee51f" style="opacity:0" class="uui-text-size-large"></div>
                </div>
              </div>
            </div>
          </div>
          <div>
            <div class="form-block-5 w-form">
              <form method="get"
                    th:action="@{/searchingByWordsAndCategory}"
                    id="filter-form" class="form-6">
                <label for="filter-select" class="field-label-11">Филтър</label>
                <select id="filter-select" th:name="filter" class="select-field-4 w-select">
                  <option value="">Сортирай по...</option>
                  <option value="New">Най-нови -&gt;</option>
                  <option value="Old">Най-стари -&gt;</option>
                  <option value="Favorites">Най-популярни-&gt;</option>
                  <option value="Expensive">Най-скъпи-&gt;</option>
                  <option value="Cheap">Най-евтини-&gt;</option>
                </select>
                <input type="submit" data-wait="Please wait..." class="submit-button-4 w-button" value="Филтрирай">
                <input type="hidden" name="searchingWord" th:value="${searchingWord}">
                <input type="hidden" name="mainCategory" th:value="${mainCategory}">
                <input type="hidden" name="cityCategory" th:value="${cityCategory}">
                <input type="hidden" name="horseCategory" th:value="${horseCategory}">
                <input type="hidden" name="genderCategory" th:value="${genderCategory}">
                <input type="hidden" name="accessoriesCategory" th:value="${accessoriesCategory}">
              </form>
              <div class="w-form-done">
                <div th:if="${successMessage}" class="error-message">
                  <p th:text="${successMessage}" class="error-text" style="color: #ffffff;" ></p>
                </div>
                <div class="w-form-fail">
                  <p th:if="${error}" class="error-text" style="color: #e1e1e1;"></p>
                  <p th:text="${error}" class="error-text" style="color: #d5d5d5;"></p>
                </div>
              </div>
            </div>
          <div class="uui-blog01_component">
            <div class="uui-blog01_list-wrapper">
              <!-- Pagination -->
              <div th:if="${offers != null }" class="pagination">
                <ul>
                  <li th:if="${offers.hasPrevious()}">
                    <a class="arrow" th:href="@{/searchingByWordsAndCategory(page=0, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord},
                    mainCategory=${mainCategory}, cityCategory=${cityCategory}, horseCategory=${horseCategory}, genderCategory=${genderCategory}, accessoriesCategory=${accessoriesCategory})}">&#171;</a>
                  </li>
                  <li th:if="${offers.hasPrevious()}">
                    <a class="arrow" th:href="@{/searchingByWordsAndCategory(page=${offers.number - 1}, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord},
                    mainCategory=${mainCategory}, cityCategory=${cityCategory}, horseCategory=${horseCategory}, genderCategory=${genderCategory}, accessoriesCategory=${accessoriesCategory})}">&#8249;</a>
                  </li>
                  <li th:each="pageNumber : ${#numbers.sequence(0, offers.totalPages - 1)}" th:class="${pageNumber == offers.number ? 'active' : ''}">
                    <a th:href="@{/searchingByWordsAndCategory(page=${pageNumber}, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord},
                    mainCategory=${mainCategory}, cityCategory=${cityCategory}, horseCategory=${horseCategory}, genderCategory=${genderCategory}, accessoriesCategory=${accessoriesCategory})}" th:text="${pageNumber + 1}"></a>
                  </li>
                  <li th:if="${offers.hasNext()}">
                    <a class="arrow" th:href="@{/searchingByWordsAndCategory(page=${offers.number + 1}, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord},
                    mainCategory=${mainCategory}, cityCategory=${cityCategory}, horseCategory=${horseCategory}, genderCategory=${genderCategory}, accessoriesCategory=${accessoriesCategory})}">&#8250;</a>
                  </li>
                  <li th:if="${offers.hasNext()}">
                    <a class="arrow" th:href="@{/searchingByWordsAndCategory(page=${offers.totalPages - 1}, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord},
                    mainCategory=${mainCategory}, cityCategory=${cityCategory}, horseCategory=${horseCategory}, genderCategory=${genderCategory}, accessoriesCategory=${accessoriesCategory})}">&#187;</a>
                  </li>
                </ul>
              </div>
              <div class="w-layout-grid uui-blog01_list">
                <div class="adswindow" th:each="offer : ${offers}" th:attr="onclick='redirectToOfferDetail(\'' + ${offer.id} + '\')'">
                  <!-- offer-model.html за всяка обява -->

                  <!-- Включване на модела на обявата -->
                  <div th:replace="fragments/offer-model"></div>
                </div>
              </div>
              <!-- Pagination -->
              <div th:if="${offers != null }" class="pagination">
                <ul>
                  <li th:if="${offers.hasPrevious()}">
                    <a class="arrow" th:href="@{/searchingByWords(page=0, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord})}">&#171;</a>
                  </li>
                  <li th:if="${offers.hasPrevious()}">
                    <a class="arrow" th:href="@{/searchingByWords(page=${offers.number - 1}, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord})}">&#8249;</a>
                  </li>
                  <li th:each="pageNumber : ${#numbers.sequence(0, offers.totalPages - 1)}" th:class="${pageNumber == offers.number ? 'active' : ''}">
                    <a th:href="@{/searchingByWords(page=${pageNumber}, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord})}" th:text="${pageNumber + 1}"></a>
                  </li>
                  <li th:if="${offers.hasNext()}">
                    <a class="arrow" th:href="@{/searchingByWords(page=${offers.number + 1}, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord})}">&#8250;</a>
                  </li>
                  <li th:if="${offers.hasNext()}">
                    <a class="arrow" th:href="@{/searchingByWords(page=${offers.totalPages - 1}, size=${offers.size}, filter=${offersSort}, searchingWord=${searchingWord})}">&#187;</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </header>
  <section class="footer">
    <div
            th:replace="~{fragments/footer::footer}">
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=65dbafc99f6b400b3852fc07" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
<script>
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const categories = ['mainCategory', 'cityCategory', 'horseCategory', 'genderCategory', 'accessoriesCategory'];

    categories.forEach(category => {
      const selectElement = document.getElementById(category);
      const hiddenInput = document.getElementsByName(category)[0];

      if (selectElement && hiddenInput) {
        hiddenInput.value = selectElement.value;

        selectElement.addEventListener('change', function() {
          hiddenInput.value = selectElement.value;
        });
      }
    });
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Възстановяване на стойности от localStorage при зареждане на страницата
    const searchInput = document.getElementById('searchInput');
    const filterSelect = document.getElementById('filter-select');
    let currentFilter = '';

    if (localStorage.getItem('searchingWord')) {
      searchInput.value = localStorage.getItem('searchingWord');
    }

    if (localStorage.getItem('filter')) {
      filterSelect.value = localStorage.getItem('filter');
    }

    // Запазване на стойности в localStorage при въвеждане на нови данни
    searchInput.addEventListener('input', function() {
      localStorage.setItem('searchingWord', searchInput.value);
    });

    filterSelect.addEventListener('change', function() {
      localStorage.setItem('filter', filterSelect.value);
    });

    // Изтриване на стойности от localStorage при изпращане на формата
    const searchForm = document.getElementById('search-form');
    searchForm.addEventListener('submit', function() {
      localStorage.removeItem('searchingWord');
      localStorage.removeItem('filter');
    });
  });
</script>
<script>
  function redirectToOfferDetail(offerId) {
    window.location.href = '/offerdetail/' + offerId;
  }
</script>
<script>
  // Показване на целия екран, когато обявите се заредят
  window.addEventListener('load', function () {
    document.body.classList.remove('loading'); // Премахваме класа "loading" от body
    const loader = document.getElementById('loader');
    loader.style.display = 'none'; // Скриваме loader-а
  });
</script>
</body>
<!-- Here you can include loading animation or message -->
<div th:unless="${offers}">
  <h1></h1>
</div>
</html>